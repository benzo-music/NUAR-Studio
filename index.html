<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NUAR Studio | –ö–∏–±–µ—Ä–ø–∞–Ω–∫-–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- –ò–ö–û–ù–ö–ê –í–ö–õ–ê–î–ö–ò -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><defs><linearGradient id=%22brainGrad%22 x1=%220%25%22 y1=%220%25%22 x2=%22100%25%22 y2=%22100%25%22><stop offset=%220%25%22 style=%22stop-color:%2300f3ff;stop-opacity:1%22/><stop offset=%22100%25%22 style=%22stop-color:%23ff00ff;stop-opacity:1%22/></linearGradient></defs><path d=%22M50,20 Q70,25 75,40 Q80,55 70,70 Q60,85 50,80 Q40,85 30,70 Q20,55 25,40 Q30,25 50,20Z%22 fill=%22url(%23brainGrad)%22 stroke=%22%2300f3ff%22 stroke-width=%222%22/><circle cx=%2250%22 cy=%2240%22 r=%225%22 fill=%22white%22/><path d=%22M40,55 Q50,60 60,55%22 stroke=%22%23ff00ff%22 stroke-width=%222%22 fill=%22none%22/></svg>">
    <style>
        :root {
            --neon-blue: #00f3ff;
            --neon-pink: #ff00ff;
            --neon-green: #00ff9d;
            --neon-orange: #ff5500;
            --dark-bg: #0a0a14;
            --panel-bg: rgba(20, 25, 40, 0.97);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: var(--dark-bg); 
            color: white; 
            font-family: 'JetBrains Mono', monospace;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* –ö–ò–ë–ï–† –°–ï–¢–ö–ê –ù–ê –§–û–ù–ï */
        .cyber-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 60px 60px;
            opacity: 0.4;
            z-index: -1;
            animation: gridMove 40s linear infinite;
        }

        @keyframes gridMove {
            0% { background-position: 0 0; }
            100% { background-position: 120px 120px; }
        }

        /* –ù–ê–í–ò–ì–ê–¶–ò–Ø –° –≠–ö–û–°–ò–°–¢–ï–ú–û–ô NUAR */
        .navbar {
            background: rgba(10, 15, 30, 0.98);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            background: linear-gradient(135deg, #00f3ff, #ff00ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 800;
        }

        .logo-icon {
            color: #00f3ff;
            animation: spinSlow 10s linear infinite;
            font-size: 2.5rem;
        }

        @keyframes spinSlow {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .ecosystem-links {
            display: flex;
            gap: 1rem;
        }

        .ecosystem-btn {
            background: rgba(0, 243, 255, 0.1);
            color: #00f3ff;
            border: 1px solid rgba(0, 243, 255, 0.3);
            padding: 0.5rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-family: 'Orbitron', sans-serif;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .ecosystem-btn:hover {
            background: rgba(0, 243, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 243, 255, 0.2);
        }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† */
        .main-container {
            display: grid;
            grid-template-columns: 350px 1fr 300px;
            gap: 2rem;
            padding: 2rem;
            max-width: 1800px;
            margin: 0 auto;
            min-height: calc(100vh - 80px);
        }

        /* –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ - –ù–ê–°–¢–†–û–ô–ö–ò */
        .settings-panel {
            background: var(--panel-bg);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 243, 255, 0.2);
            backdrop-filter: blur(10px);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .panel-title {
            color: #00f3ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 2px solid rgba(0, 243, 255, 0.2);
            padding-bottom: 10px;
        }

        /* –ö–ê–¢–ï–ì–û–†–ò–ò –≠–§–§–ï–ö–¢–û–í */
        .category {
            margin-bottom: 2rem;
        }

        .category-title {
            color: #ff00ff;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }

        /* –≠–õ–ï–ú–ï–ù–¢–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø */
        .control-item {
            margin-bottom: 1.2rem;
        }

        label {
            display: block;
            color: #a0b8d0;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        input[type="text"], input[type="range"], select {
            width: 100%;
            padding: 12px;
            background: rgba(0, 10, 20, 0.8);
            border: 1px solid rgba(0, 243, 255, 0.3);
            border-radius: 10px;
            color: white;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input[type="text"]:focus, select:focus {
            outline: none;
            border-color: #00f3ff;
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.3);
        }

        /* –ß–ï–ö–ë–û–ö–°–´ */
        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 0.5rem;
        }

        .checkbox-container input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #00f3ff;
        }

        /* –¶–í–ï–¢–ê */
        .color-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-top: 0.5rem;
        }

        .color-option {
            width: 35px;
            height: 35px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .color-option:hover {
            transform: scale(1.15);
        }

        .color-option.active {
            border-color: white;
            box-shadow: 0 0 15px currentColor;
        }

        /* –ì–õ–ê–í–ù–ê–Ø –û–ë–õ–ê–°–¢–¨ - –ü–†–ï–î–ü–†–û–°–ú–û–¢–† */
        .preview-section {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .preview-container {
            background: var(--panel-bg);
            border-radius: 20px;
            padding: 2.5rem;
            border: 1px solid rgba(255, 0, 255, 0.2);
            backdrop-filter: blur(10px);
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 600px;
            position: relative;
            overflow: hidden;
        }

        /* –ö–ê–ù–í–ê–° –î–õ–Ø –†–ï–ù–î–ï–†–ò–ù–ì–ê */
        #renderCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        /* –°–¢–ò–ö–ï–†–´ –ò –≠–§–§–ï–ö–¢–´ –ù–ê –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ï */
        .sticker {
            position: absolute;
            font-size: 2rem;
            opacity: 0.6;
            animation: float 3s ease-in-out infinite;
            z-index: 2;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        /* –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ - –®–ê–ë–õ–û–ù–´ */
        .templates-panel {
            background: var(--panel-bg);
            border-radius: 20px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 243, 255, 0.2);
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .template-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .template-card {
            background: rgba(0, 10, 20, 0.6);
            border-radius: 15px;
            padding: 1.5rem;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .template-card:hover {
            border-color: #00f3ff;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 243, 255, 0.2);
        }

        .template-card.active {
            border-color: #ff00ff;
            background: rgba(255, 0, 255, 0.05);
        }

        .template-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        /* –ñ–ò–í–û–ô –ü–†–ï–î–ü–†–û–°–ú–û–¢–† –¢–ï–ö–°–¢–ê */
        .live-text {
            font-family: 'Orbitron', sans-serif;
            font-size: 3.5rem;
            text-align: center;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.2);
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            transition: all 0.5s;
            z-index: 2;
            width: 100%;
        }

        .text-container {
            position: relative;
            z-index: 3;
        }

        .main-preview {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .sub-preview {
            font-size: 1.8rem;
            opacity: 0.9;
            transition: all 0.3s;
        }

        .sub-preview.hidden {
            display: none;
        }

        /* –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô */
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 2rem;
            width: 100%;
            z-index: 2;
            position: relative;
        }

        .action-btn {
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #00f3ff, #9d00ff);
            color: white;
        }

        .btn-secondary {
            background: rgba(0, 243, 255, 0.1);
            color: #00f3ff;
            border: 2px solid #00f3ff;
        }

        .btn-success {
            background: linear-gradient(135deg, #00ff9d, #00b36b);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff5500, #ff9900);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 243, 255, 0.4);
        }

        /* –°–¢–ê–¢–£–° –ë–ê–† */
        .status-bar {
            background: rgba(0, 10, 20, 0.8);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            color: #a0b8d0;
            width: 100%;
            z-index: 2;
            position: relative;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff9d;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
        .nuar-notification {
            position: fixed;
            top: 100px;
            right: 20px;
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 600;
            z-index: 10000;
            animation: slideInRight 0.3s ease-out;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 400px;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        /* –ü–†–û–ì–†–ï–°–° –ë–ê–† –î–õ–Ø GIF */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            flex-direction: column;
            gap: 20px;
        }

        .progress-bar {
            width: 300px;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(0, 243, 255, 0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00f3ff, #ff00ff);
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            color: #00f3ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 1400px) {
            .main-container { grid-template-columns: 300px 1fr; }
            .templates-panel { display: none; }
        }

        @media (max-width: 1200px) {
            .action-buttons { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 992px) {
            .main-container { grid-template-columns: 1fr; padding: 1rem; }
            .settings-panel, .templates-panel { position: static; }
            .live-text { font-size: 2.5rem; }
            .main-preview { font-size: 2.5rem; }
            .action-buttons { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- –§–û–ù -->
    <div class="cyber-bg"></div>

    <!-- –ü–†–û–ì–†–ï–°–° –ë–ê–† –î–õ–Ø GIF -->
    <div class="progress-container" id="progressContainer">
        <div class="progress-text" id="progressText">–°–æ–∑–¥–∞–µ–º GIF... 0%</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" style="font-size: 0.9rem; color: #a0b8d0;">
            –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...
        </div>
    </div>

    <!-- –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <nav class="navbar">
        <div class="logo-container">
            <div class="logo">
                <i class="fas fa-brain logo-icon"></i> NUAR STUDIO
            </div>
            <div style="color: #a0b8d0; font-size: 0.9rem;">
                –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–æ–≤
            </div>
        </div>
        
        <div class="ecosystem-links">
            <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –°–°–´–õ–ö–ê –ù–ê –ü–ï–†–ï–í–û–î–ß–ò–ö -->
            <a href="https://benzo-music.github.io/NUAR/" target="_blank" class="ecosystem-btn">
                <i class="fas fa-language"></i> –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫
            </a>
        </div>
    </nav>

    <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† -->
    <div class="main-container">
        <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨: –ù–ê–°–¢–†–û–ô–ö–ò -->
        <div class="settings-panel">
            <div class="panel-title">
                <i class="fas fa-sliders-h"></i> –ù–ê–°–¢–†–û–ô–ö–ò –î–ò–ó–ê–ô–ù–ê
            </div>

            <!-- –¢–ï–ö–°–¢ -->
            <div class="category">
                <div class="category-title">
                    <i class="fas fa-font"></i> –¢–ï–ö–°–¢
                </div>
                <div class="control-item">
                    <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç:</label>
                    <input type="text" id="mainText" value="CYBERSTREAMER LIVE" maxlength="30">
                </div>
                <div class="control-item">
                    <label>–í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:</label>
                    <input type="text" id="subText" value="–ò–≥—Ä–∞–µ—Ç –≤ Cyberpunk 2077" maxlength="40">
                </div>
                <!-- –î–û–ë–ê–í–õ–ï–ù –ß–ï–ö–ë–û–ö–° –î–õ–Ø –°–ö–†–´–¢–ò–Ø –ü–û–î–¢–ï–ö–°–¢–ê -->
                <div class="control-item">
                    <div class="checkbox-container">
                        <input type="checkbox" id="hideSubText" checked>
                        <label for="hideSubText" style="margin-bottom: 0;">–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
                    </div>
                </div>
            </div>

            <!-- –¶–í–ï–¢–ê -->
            <div class="category">
                <div class="category-title">
                    <i class="fas fa-palette"></i> –¶–í–ï–¢–ê
                </div>
                <div class="control-item">
                    <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞:</label>
                    <div class="color-grid">
                        <!-- 12 –Ω–µ–æ–Ω–æ–≤—ã—Ö —Ü–≤–µ—Ç–æ–≤ -->
                        <div class="color-option active" style="background:#00f3ff;" data-color="#00f3ff"></div>
                        <div class="color-option" style="background:#ff00ff;" data-color="#ff00ff"></div>
                        <div class="color-option" style="background:#00ff9d;" data-color="#00ff9d"></div>
                        <div class="color-option" style="background:#ff5500;" data-color="#ff5500"></div>
                        <div class="color-option" style="background:#9d00ff;" data-color="#9d00ff"></div>
                        <div class="color-option" style="background:#ff009d;" data-color="#ff009d"></div>
                        <div class="color-option" style="background:#00ffea;" data-color="#00ffea"></div>
                        <div class="color-option" style="background:#ffcc00;" data-color="#ffcc00"></div>
                        <div class="color-option" style="background:#00ff7f;" data-color="#00ff7f"></div>
                        <div class="color-option" style="background:#ff3366;" data-color="#ff3366"></div>
                        <div class="color-option" style="background:#33ccff;" data-color="#33ccff"></div>
                        <div class="color-option" style="background:#cc33ff;" data-color="#cc33ff"></div>
                    </div>
                </div>
            </div>

            <!-- –≠–§–§–ï–ö–¢–´ -->
            <div class="category">
                <div class="category-title">
                    <i class="fas fa-magic"></i> –≠–§–§–ï–ö–¢–´
                </div>
                <div class="control-item">
                    <label>–¢–∏–ø —Å–≤–µ—á–µ–Ω–∏—è:</label>
                    <select id="glowType">
                        <option value="simple">–ü—Ä–æ—Å—Ç–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ</option>
                        <option value="double">–î–≤–æ–π–Ω–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ</option>
                        <option value="pulse" selected>–ü—É–ª—å—Å–∏—Ä—É—é—â–µ–µ</option>
                        <option value="neon-rainbow">–ù–µ–æ–Ω–æ–≤–∞—è —Ä–∞–¥—É–≥–∞</option>
                        <option value="glitch">–ì–ª–∏—Ç—á-—ç—Ñ—Ñ–µ–∫—Ç</option>
                    </select>
                </div>
                <div class="control-item">
                    <label>–°–∏–ª–∞ —Å–≤–µ—á–µ–Ω–∏—è: <span id="glowValue">25</span>px</label>
                    <input type="range" id="glowStrength" min="5" max="60" value="25">
                </div>
                <!-- –î–û–ë–ê–í–õ–ï–ù–´ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–û–ù–´ -->
                <div class="control-item">
                    <label>–§–æ–Ω–æ–≤–∞—è –∞–Ω–∏–º–∞—Ü–∏—è:</label>
                    <select id="bgAnimation">
                        <option value="none">–ù–µ—Ç</option>
                        <option value="grid" selected>–î–≤–∏–∂—É—â–∞—è—Å—è —Å–µ—Ç–∫–∞</option>
                        <option value="circuits">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã</option>
                        <option value="particles">–ß–∞—Å—Ç–∏—Ü—ã</option>
                        <option value="scan">–°–∫–∞–Ω–∏—Ä—É—é—â–∏–µ –ª–∏–Ω–∏–∏</option>
                        <option value="hexagon">–®–µ—Å—Ç–∏—É–≥–æ–ª—å–Ω–∏–∫–∏</option>
                        <option value="dots">–¢–æ—á–µ—á–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞</option>
                        <option value="waves">–°–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–µ –≤–æ–ª–Ω—ã</option>
                        <option value="triangles">–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏</option>
                        <option value="binary">–ë–∏–Ω–∞—Ä–Ω—ã–π –∫–æ–¥</option>
                        <option value="nebula">–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è —Ç—É–º–∞–Ω–Ω–æ—Å—Ç—å</option>
                    </select>
                </div>
            </div>

            <!-- –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û -->
            <div class="category">
                <div class="category-title">
                    <i class="fas fa-plus-circle"></i> –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û
                </div>
                <div class="control-item">
                    <label>–°—Ç–∏–∫–µ—Ä—ã:</label>
                    <select id="stickerSelect">
                        <option value="none">–ë–µ–∑ —Å—Ç–∏–∫–µ—Ä–æ–≤</option>
                        <option value="gaming" selected>–ò–≥—Ä–æ–≤—ã–µ</option>
                        <option value="music">–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ</option>
                        <option value="tech">–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</option>
                        <option value="cyber">–ö–∏–±–µ—Ä–ø–∞–Ω–∫</option>
                    </select>
                </div>
                <div class="control-item">
                    <label>–î–æ–±–∞–≤–∏—Ç—å QR-–∫–æ–¥:</label>
                    <input type="text" id="qrUrl" placeholder="https://–≤–∞—à-—Å–∞–π—Ç.com">
                </div>
            </div>
        </div>

        <!-- –¶–ï–ù–¢–†–ê–õ–¨–ù–ê–Ø –û–ë–õ–ê–°–¢–¨: –ü–†–ï–î–ü–†–û–°–ú–û–¢–† -->
        <div class="preview-section">
            <div class="preview-container">
                <!-- –ö–ê–ù–í–ê–° –î–õ–Ø –†–ï–ù–î–ï–†–ò–ù–ì–ê –≠–§–§–ï–ö–¢–û–í -->
                <canvas id="renderCanvas"></canvas>
                
                <!-- –°–¢–ò–ö–ï–†–´ (–≠–ú–û–î–ó–ò) -->
                <div class="sticker" id="sticker1" style="top:20%; left:10%;">
                    üéÆ
                </div>
                <div class="sticker" id="sticker2" style="top:30%; right:15%;">
                    üéß
                </div>

                <!-- –ñ–ò–í–û–ô –ü–†–ï–î–ü–†–û–°–ú–û–¢–† -->
                <div class="live-text">
                    <div class="text-container">
                        <div class="main-preview" id="mainPreview">CYBERSTREAMER LIVE</div>
                        <div class="sub-preview" id="subPreview">–ò–≥—Ä–∞–µ—Ç –≤ Cyberpunk 2077</div>
                    </div>
                </div>

                <!-- –ö–ù–û–ü–ö–ò –î–ï–ô–°–¢–í–ò–ô -->
                <div class="action-buttons">
                    <button class="action-btn btn-primary" id="downloadSimpleBtn">
                        <i class="fas fa-download"></i> –°–ö–ê–ß–ê–¢–¨ PNG
                    </button>
                    <button class="action-btn btn-success" id="downloadFullBtn">
                        <i class="fas fa-image"></i> –° –≠–§–§–ï–ö–¢–ê–ú–ò
                    </button>
                    <!-- –ö–ù–û–ü–ö–ê –î–õ–Ø –ù–û–†–ú–ê–õ–¨–ù–û–ì–û GIF -->
                    <button class="action-btn btn-warning" id="downloadGifBtn">
                        <i class="fas fa-film"></i> –°–ö–ê–ß–ê–¢–¨ GIF
                    </button>
                    <button class="action-btn btn-secondary" id="copyCssBtn">
                        <i class="fas fa-code"></i> –ö–û–ü–ò–†–û–í–ê–¢–¨ CSS
                    </button>
                    <button class="action-btn btn-secondary" id="shareBtn">
                        <i class="fas fa-share-alt"></i> –ü–û–î–ï–õ–ò–¢–¨–°–Ø
                    </button>
                    <button class="action-btn btn-secondary" id="exportJsonBtn">
                        <i class="fas fa-file-export"></i> –≠–ö–°–ü–û–†–¢ –ù–ê–°–¢–†–û–ï–ö
                    </button>
                </div>

                <!-- –°—Ç–∞—Ç—É—Å –±–∞—Ä -->
                <div class="status-bar">
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span>–ì–æ—Ç–æ–≤ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É</span>
                    </div>
                    <div>
                        <span id="fileSize">~450 KB</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨: –®–ê–ë–õ–û–ù–´ -->
        <div class="templates-panel">
            <div class="panel-title">
                <i class="fas fa-layer-group"></i> –ì–û–¢–û–í–´–ï –®–ê–ë–õ–û–ù–´
            </div>
            
            <div class="template-grid">
                <div class="template-card active" data-template="gamer">
                    <i class="fas fa-gamepad template-icon" style="color:#00f3ff;"></i>
                    <h3>–ì–µ–π–º–µ—Ä—Å–∫–∏–π</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è –∏–≥—Ä–æ–≤—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
                    </p>
                </div>
                
                <div class="template-card" data-template="music">
                    <i class="fas fa-music template-icon" style="color:#ff00ff;"></i>
                    <h3>–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–π</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∏–º–æ–≤
                    </p>
                </div>
                
                <div class="template-card" data-template="creative">
                    <i class="fas fa-paint-brush template-icon" style="color:#00ff9d;"></i>
                    <h3>–¢–≤–æ—Ä—á–µ—Å–∫–∏–π</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ –∏ –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤
                    </p>
                </div>
                
                <div class="template-card" data-template="tech">
                    <i class="fas fa-microchip template-icon" style="color:#ff5500;"></i>
                    <h3>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è IT-—Å—Ç—Ä–∏–º–æ–≤
                    </p>
                </div>
                
                <div class="template-card" data-template="podcast">
                    <i class="fas fa-podcast template-icon" style="color:#9d00ff;"></i>
                    <h3>–ü–æ–¥–∫–∞—Å—Ç</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è –ø–æ–¥–∫–∞—Å—Ç–æ–≤ –∏ –∏–Ω—Ç–µ—Ä–≤—å—é
                    </p>
                </div>
                
                <div class="template-card" data-template="education">
                    <i class="fas fa-graduation-cap template-icon" style="color:#00ffea;"></i>
                    <h3>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h3>
                    <p style="color:#a0b8d0; font-size:0.9rem; margin-top:5px;">
                        –î–ª—è –æ–±—É—á–∞—é—â–∏—Ö —Å—Ç—Ä–∏–º–æ–≤
                    </p>
                </div>
            </div>
            
            <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(0,243,255,0.1);">
                <div class="category-title">
                    <i class="fas fa-bolt"></i> –ë–´–°–¢–†–´–ï –ù–ê–°–¢–†–û–ô–ö–ò
                </div>
                <button class="action-btn btn-secondary" id="randomBtn" style="width:100%; margin-top:1rem;">
                    <i class="fas fa-random"></i> –°–õ–£–ß–ê–ô–ù–´–ô –î–ò–ó–ê–ô–ù
                </button>
                <button class="action-btn btn-secondary" id="resetBtn" style="width:100%; margin-top:0.5rem;">
                    <i class="fas fa-redo"></i> –°–ë–†–û–°–ò–¢–¨
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        const state = {
            mainText: 'CYBERSTREAMER LIVE',
            subText: '–ò–≥—Ä–∞–µ—Ç –≤ Cyberpunk 2077',
            color: '#00f3ff',
            glowType: 'pulse',
            glowStrength: 25,
            bgAnimation: 'grid',
            stickerType: 'gaming',
            qrUrl: '',
            template: 'gamer',
            particles: [],
            animationId: null,
            lastRenderTime: 0,
            showSubText: true
        };

        // ========== DOM –≠–õ–ï–ú–ï–ù–¢–´ ==========
        const elements = {
            canvas: document.getElementById('renderCanvas'),
            mainPreview: document.getElementById('mainPreview'),
            subPreview: document.getElementById('subPreview'),
            sticker1: document.getElementById('sticker1'),
            sticker2: document.getElementById('sticker2'),
            mainText: document.getElementById('mainText'),
            subText: document.getElementById('subText'),
            hideSubText: document.getElementById('hideSubText'),
            glowType: document.getElementById('glowType'),
            glowStrength: document.getElementById('glowStrength'),
            glowValue: document.getElementById('glowValue'),
            bgAnimation: document.getElementById('bgAnimation'),
            stickerSelect: document.getElementById('stickerSelect'),
            qrUrl: document.getElementById('qrUrl'),
            colorOptions: document.querySelectorAll('.color-option'),
            templateCards: document.querySelectorAll('.template-card'),
            downloadSimpleBtn: document.getElementById('downloadSimpleBtn'),
            downloadFullBtn: document.getElementById('downloadFullBtn'),
            downloadGifBtn: document.getElementById('downloadGifBtn'),
            copyCssBtn: document.getElementById('copyCssBtn'),
            shareBtn: document.getElementById('shareBtn'),
            randomBtn: document.getElementById('randomBtn'),
            resetBtn: document.getElementById('resetBtn'),
            exportJsonBtn: document.getElementById('exportJsonBtn'),
            fileSize: document.getElementById('fileSize'),
            progressContainer: document.getElementById('progressContainer'),
            progressText: document.getElementById('progressText'),
            progressFill: document.getElementById('progressFill')
        };

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        function init() {
            setupCanvas();
            setupEventListeners();
            updatePreview();
            generateParticles();
            startAnimation();
            showNotification('NUAR Studio –∑–∞–≥—Ä—É–∂–µ–Ω! –ù–∞—á–Ω–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–π –¥–∏–∑–∞–π–Ω.', 'success');
        }

        // ========== –ù–ê–°–¢–†–û–ô–ö–ê –ö–ê–ù–í–ê–°–ê ==========
        function setupCanvas() {
            const container = document.querySelector('.preview-container');
            if (container && elements.canvas) {
                elements.canvas.width = container.clientWidth;
                elements.canvas.height = container.clientHeight;
            }
        }

        // ========== –ù–ê–°–¢–†–û–ô–ö–ê –°–û–ë–´–¢–ò–ô ==========
        function setupEventListeners() {
            // –¢–µ–∫—Å—Ç
            elements.mainText.addEventListener('input', (e) => {
                state.mainText = e.target.value || '–í–∞—à —Ç–µ–∫—Å—Ç';
                updatePreview();
            });
            
            elements.subText.addEventListener('input', (e) => {
                state.subText = e.target.value;
                updatePreview();
            });
            
            elements.hideSubText.addEventListener('change', (e) => {
                state.showSubText = e.target.checked;
                updatePreview();
            });

            // –¶–≤–µ—Ç–∞
            elements.colorOptions.forEach(option => {
                option.addEventListener('click', (e) => {
                    elements.colorOptions.forEach(o => o.classList.remove('active'));
                    e.target.classList.add('active');
                    state.color = e.target.dataset.color;
                    updatePreview();
                });
            });

            // –≠—Ñ—Ñ–µ–∫—Ç—ã
            elements.glowType.addEventListener('change', (e) => {
                state.glowType = e.target.value;
                updatePreview();
            });
            
            elements.glowStrength.addEventListener('input', (e) => {
                state.glowStrength = parseInt(e.target.value);
                elements.glowValue.textContent = state.glowStrength;
                updatePreview();
            });
            
            elements.bgAnimation.addEventListener('change', (e) => {
                state.bgAnimation = e.target.value;
                generateParticles();
            });
            
            elements.stickerSelect.addEventListener('change', (e) => {
                state.stickerType = e.target.value;
                updateStickers();
            });
            
            elements.qrUrl.addEventListener('input', (e) => {
                state.qrUrl = e.target.value;
            });

            // –®–∞–±–ª–æ–Ω—ã
            elements.templateCards.forEach(card => {
                card.addEventListener('click', (e) => {
                    elements.templateCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    state.template = card.dataset.template;
                    applyTemplate(state.template);
                });
            });

            // –ö–Ω–æ–ø–∫–∏
            elements.downloadSimpleBtn.addEventListener('click', () => downloadImage(false));
            elements.downloadFullBtn.addEventListener('click', () => downloadImage(true));
            elements.downloadGifBtn.addEventListener('click', createRealGif);
            elements.copyCssBtn.addEventListener('click', copyCss);
            elements.shareBtn.addEventListener('click', shareDesign);
            elements.randomBtn.addEventListener('click', randomDesign);
            elements.resetBtn.addEventListener('click', resetDesign);
            elements.exportJsonBtn.addEventListener('click', exportSettings);

            // –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å
            window.addEventListener('resize', () => {
                setupCanvas();
                generateParticles();
            });
        }

        // ========== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–ï–î–ü–†–û–°–ú–û–¢–†–ê ==========
        function updatePreview() {
            if (!elements.mainPreview || !elements.subPreview) return;
            
            elements.mainPreview.textContent = state.mainText;
            elements.subPreview.textContent = state.subText;
            
            if (state.showSubText && state.subText.trim()) {
                elements.subPreview.classList.remove('hidden');
            } else {
                elements.subPreview.classList.add('hidden');
            }
            
            applyTextStyles();
            updateStickers();
            updateFileSize();
            applyGlowEffect();
        }

        function applyTextStyles() {
            if (!elements.mainPreview) return;
            
            const textShadow = getTextShadow();
            const animation = getGlowAnimation();
            
            elements.mainPreview.style.color = state.color;
            elements.mainPreview.style.textShadow = textShadow;
            elements.mainPreview.style.animation = animation;
            
            if (state.showSubText && state.subText.trim() && elements.subPreview) {
                const subGlow = Math.max(10, state.glowStrength * 0.6);
                elements.subPreview.style.color = state.color;
                elements.subPreview.style.textShadow = `0 0 ${subGlow}px ${state.color}`;
                elements.subPreview.style.opacity = '0.9';
            }
            
            if (elements.sticker1 && elements.sticker2) {
                elements.sticker1.style.color = state.color;
                elements.sticker2.style.color = getComplementaryColor(state.color);
            }
        }

        function getTextShadow() {
            const g = state.glowStrength;
            const c = state.color;
            
            switch(state.glowType) {
                case 'simple': return `0 0 ${g}px ${c}`;
                case 'double': return `0 0 ${g}px ${c}, 0 0 ${g*2}px ${c}`;
                case 'pulse': return `0 0 ${g}px ${c}`;
                case 'neon-rainbow': return `0 0 ${g}px ${c}, 0 0 ${g*2}px ${getComplementaryColor(c)}`;
                case 'glitch': return `2px 2px ${g}px ${c}, -2px -2px ${g}px ${getComplementaryColor(c)}`;
                default: return `0 0 ${g}px ${c}`;
            }
        }

        function getGlowAnimation() {
            switch(state.glowType) {
                case 'pulse': return 'pulse 2s infinite';
                case 'neon-rainbow': return 'rainbow 3s linear infinite';
                case 'glitch': return 'glitch 0.5s infinite';
                default: return 'none';
            }
        }

        function applyGlowEffect() {
            if (!elements.mainPreview) return;
            
            elements.mainPreview.className = 'main-preview';
            if (state.glowType === 'pulse') {
                elements.mainPreview.classList.add('pulse-effect');
            } else if (state.glowType === 'glitch') {
                elements.mainPreview.classList.add('glitch-effect');
            }
        }

        // ========== –ì–ï–ù–ï–†–ê–¶–ò–Ø –ß–ê–°–¢–ò–¶ ==========
        function generateParticles() {
            state.particles = [];
            const count = state.bgAnimation === 'particles' ? 50 : 
                         state.bgAnimation === 'dots' ? 200 : 0;
            
            for (let i = 0; i < count; i++) {
                state.particles.push({
                    x: Math.random() * (elements.canvas?.width || 800),
                    y: Math.random() * (elements.canvas?.height || 400),
                    size: Math.random() * 3 + 1,
                    speedX: (Math.random() - 0.5) * 2,
                    speedY: (Math.random() - 0.5) * 2,
                    color: Math.random() > 0.5 ? state.color : getComplementaryColor(state.color),
                    alpha: Math.random() * 0.5 + 0.2
                });
            }
        }

        // ========== –°–¢–ò–ö–ï–†–´ ==========
        function updateStickers() {
            const emojis = getStickerEmojis();
            if (elements.sticker1 && elements.sticker2) {
                elements.sticker1.innerHTML = emojis[0];
                elements.sticker2.innerHTML = emojis[1];
                
                const showStickers = state.stickerType !== 'none';
                elements.sticker1.style.display = showStickers ? 'block' : 'none';
                elements.sticker2.style.display = showStickers ? 'block' : 'none';
                
                if (showStickers) {
                    elements.sticker1.style.color = state.color;
                    elements.sticker2.style.color = getComplementaryColor(state.color);
                }
            }
        }

        function getStickerEmojis() {
            switch(state.stickerType) {
                case 'gaming': return ['üéÆ', 'üèÜ'];
                case 'music': return ['üéß', 'üéµ'];
                case 'tech': return ['üíª', 'ü§ñ'];
                case 'cyber': return ['üß†', 'üëÅÔ∏è'];
                default: return ['‚≠ê', '‚ö°'];
            }
        }

        // ========== –®–ê–ë–õ–û–ù–´ ==========
        function applyTemplate(template) {
            const templates = {
                gamer: {
                    mainText: 'CYBERSTREAMER LIVE',
                    subText: '–ò–≥—Ä–∞–µ—Ç –≤ Cyberpunk 2077',
                    color: '#00f3ff',
                    glowType: 'pulse',
                    stickerType: 'gaming',
                    bgAnimation: 'grid'
                },
                music: {
                    mainText: 'SYNTHWAVE RADIO',
                    subText: '–ü—Ä—è–º–æ–π —ç—Ñ–∏—Ä ‚Ä¢ 24/7',
                    color: '#ff00ff',
                    glowType: 'neon-rainbow',
                    stickerType: 'music',
                    bgAnimation: 'particles'
                },
                creative: {
                    mainText: 'DIGITAL ART ZONE',
                    subText: '–†–∏—Å—É—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏',
                    color: '#00ff9d',
                    glowType: 'double',
                    stickerType: 'cyber',
                    bgAnimation: 'circuits'
                },
                tech: {
                    mainText: 'TECH TALK LIVE',
                    subText: '–û–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π',
                    color: '#ff5500',
                    glowType: 'glitch',
                    stickerType: 'tech',
                    bgAnimation: 'scan'
                },
                podcast: {
                    mainText: 'CYBERPUNK PODCAST',
                    subText: '–ù–æ–≤—ã–π –≤—ã–ø—É—Å–∫ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é',
                    color: '#9d00ff',
                    glowType: 'simple',
                    stickerType: 'none',
                    bgAnimation: 'none'
                },
                education: {
                    mainText: 'CODE ACADEMY',
                    subText: '–£—á–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é',
                    color: '#00ffea',
                    glowType: 'pulse',
                    stickerType: 'tech',
                    bgAnimation: 'grid'
                }
            };
            
            const t = templates[template];
            if (!t) return;
            
            Object.assign(state, t);
            
            if (elements.mainText) elements.mainText.value = state.mainText;
            if (elements.subText) elements.subText.value = state.subText;
            if (elements.glowType) elements.glowType.value = state.glowType;
            if (elements.glowStrength) {
                elements.glowStrength.value = state.glowStrength;
                if (elements.glowValue) elements.glowValue.textContent = state.glowStrength;
            }
            if (elements.bgAnimation) elements.bgAnimation.value = state.bgAnimation;
            if (elements.stickerSelect) elements.stickerSelect.value = state.stickerType;
            if (elements.hideSubText) {
                elements.hideSubText.checked = true;
                state.showSubText = true;
            }
            
            if (elements.colorOptions) {
                elements.colorOptions.forEach(opt => {
                    opt.classList.remove('active');
                    if (opt.dataset.color === state.color) {
                        opt.classList.add('active');
                    }
                });
            }
            
            generateParticles();
            updatePreview();
            
            showNotification(`–®–∞–±–ª–æ–Ω "${template}" –ø—Ä–∏–º–µ–Ω–µ–Ω!`, 'success');
        }

        // ========== –°–ö–ê–ß–ò–í–ê–ù–ò–ï PNG ==========
        function downloadImage(withEffects) {
            showNotification('–°–æ–∑–¥–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ...', 'info');
            
            try {
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = 1920;
                tempCanvas.height = 500;
                const ctx = tempCanvas.getContext('2d');
                
                if (!ctx) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç canvas');
                
                if (withEffects) {
                    drawFullDesign(ctx, tempCanvas.width, tempCanvas.height);
                } else {
                    drawSimpleDesign(ctx, tempCanvas.width, tempCanvas.height);
                }
                
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.font = 'bold 24px Orbitron';
                ctx.textAlign = 'left';
                ctx.fillText('–°–æ–∑–¥–∞–Ω–æ –≤ NUAR Studio', 50, tempCanvas.height - 30);
                
                const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
                const filename = `nuar-design-${timestamp}.png`;
                
                const link = document.createElement('a');
                link.download = filename;
                link.href = tempCanvas.toDataURL('image/png');
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                
                showNotification(`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–∞—á–∞–Ω–æ! (${withEffects ? '—Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏' : '–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è'})`, 'success');
                updateFileSize();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', 'error');
            }
        }

        function drawSimpleDesign(ctx, width, height) {
            ctx.fillStyle = '#0a0a14';
            ctx.fillRect(0, 0, width, height);
            
            ctx.strokeStyle = 'rgba(0, 243, 255, 0.1)';
            ctx.lineWidth = 1;
            
            for (let x = 0; x < width; x += 60) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
            }
            
            for (let y = 0; y < height; y += 60) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }
            
            ctx.font = 'bold 100px Orbitron';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = state.color;
            ctx.shadowColor = state.color;
            ctx.shadowBlur = state.glowStrength;
            ctx.fillText(state.mainText, width / 2, height / 2 - 40);
            ctx.shadowBlur = 0;
            
            if (state.showSubText && state.subText) {
                ctx.font = 'bold 40px Orbitron';
                ctx.fillStyle = state.color;
                ctx.fillText(state.subText, width / 2, height / 2 + 60);
            }
        }

        function drawFullDesign(ctx, width, height) {
            drawBackground(ctx, width, height);
            
            ctx.font = 'bold 100px Orbitron';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.shadowColor = state.color;
            ctx.shadowBlur = state.glowStrength;
            ctx.fillStyle = state.color;
            ctx.fillText(state.mainText, width / 2, height / 2 - 40);
            
            if (state.showSubText && state.subText) {
                ctx.font = 'bold 40px Orbitron';
                ctx.fillStyle = state.color;
                ctx.fillText(state.subText, width / 2, height / 2 + 60);
            }
            
            ctx.shadowBlur = 0;
            
            if (state.stickerType !== 'none') {
                const emojis = getStickerEmojis();
                ctx.font = '80px Arial';
                ctx.fillStyle = state.color;
                ctx.fillText(emojis[0], width * 0.15, height * 0.3);
                ctx.fillStyle = getComplementaryColor(state.color);
                ctx.fillText(emojis[1], width * 0.85, height * 0.7);
            }
            
            if (state.qrUrl) {
                drawQRCode(ctx, width, height);
            }
        }

        // ========== –°–û–ó–î–ê–ù–ò–ï –ù–ê–°–¢–û–Ø–©–ï–ì–û GIF ==========
        async function createRealGif() {
            try {
                elements.progressContainer.style.display = 'flex';
                elements.progressFill.style.width = '0%';
                elements.progressText.textContent = '–°–æ–∑–¥–∞–µ–º GIF... 0%';
                
                // –°–æ–∑–¥–∞–µ–º —Ñ—Ä–µ–π–º—ã –¥–ª—è GIF
                const frames = 15; // 15 –∫–∞–¥—Ä–æ–≤ –¥–ª—è –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏
                const framePromises = [];
                const frameDelays = [];
                
                for (let i = 0; i < frames; i++) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    const progress = Math.round((i / frames) * 100);
                    elements.progressFill.style.width = `${progress}%`;
                    elements.progressText.textContent = `–°–æ–∑–¥–∞–µ–º GIF... ${progress}%`;
                    
                    // –°–æ–∑–¥–∞–µ–º –∫–∞–Ω–≤–∞—Å –¥–ª—è –∫–∞–¥—Ä–∞
                    const canvas = document.createElement('canvas');
                    canvas.width = 800;
                    canvas.height = 300;
                    const ctx = canvas.getContext('2d');
                    
                    // –†–∏—Å—É–µ–º —Ñ–æ–Ω
                    drawBackground(ctx, canvas.width, canvas.height);
                    
                    // –ê–Ω–∏–º–∏—Ä—É–µ–º –ø—É–ª—å—Å–∞—Ü–∏—é
                    const pulse = 0.8 + Math.sin(i * 0.4) * 0.2;
                    const glow = state.glowStrength * pulse;
                    
                    // –†–∏—Å—É–µ–º —Ç–µ–∫—Å—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                    ctx.font = 'bold 60px Orbitron';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.shadowColor = state.color;
                    ctx.shadowBlur = glow;
                    ctx.fillStyle = state.color;
                    ctx.fillText(state.mainText, canvas.width / 2, canvas.height / 2 - 20);
                    
                    if (state.showSubText && state.subText) {
                        ctx.font = 'bold 30px Orbitron';
                        ctx.fillStyle = state.color;
                        ctx.fillText(state.subText, canvas.width / 2, canvas.height / 2 + 40);
                    }
                    
                    ctx.shadowBlur = 0;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                    ctx.font = 'bold 16px Orbitron';
                    ctx.textAlign = 'left';
                    ctx.fillText('NUAR Studio', 20, canvas.height - 20);
                    
                    // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∫–∞–Ω–≤–∞—Å –≤ DataURL
                    const frameData = canvas.toDataURL('image/png');
                    framePromises.push(Promise.resolve(frameData));
                    frameDelays.push(100); // 100ms –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏
                    
                    // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å
                    await new Promise(resolve => setTimeout(resolve, 10));
                }
                
                // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ—Ä–µ–π–º—ã
                const framesData = await Promise.all(framePromises);
                
                // –°–æ–∑–¥–∞–µ–º GIF —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º APNG
                await createAnimatedImage(framesData, frameDelays);
                
                elements.progressFill.style.width = '100%';
                elements.progressText.textContent = 'GIF —Å–æ–∑–¥–∞–Ω!';
                
                setTimeout(() => {
                    elements.progressContainer.style.display = 'none';
                }, 1000);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ GIF:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ GIF', 'error');
                elements.progressContainer.style.display = 'none';
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (GIF –∏–ª–∏ APNG)
        async function createAnimatedImage(framesData, delays) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ gif.js
            if (typeof GIF !== 'undefined') {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º gif.js –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞
                return createGifWithLibrary(framesData, delays);
            } else {
                // –ò–Ω–∞—á–µ —Å–æ–∑–¥–∞–µ–º ZIP –∞—Ä—Ö–∏–≤ —Å –∫–∞–¥—Ä–∞–º–∏
                return createFramesZip(framesData);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ GIF —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
        function createGifWithLibrary(framesData, delays) {
            return new Promise((resolve, reject) => {
                try {
                    const gif = new GIF({
                        workers: 2,
                        quality: 10,
                        width: 800,
                        height: 300
                    });
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ñ—Ä–µ–π–º—ã –≤ GIF
                    framesData.forEach((dataUrl, index) => {
                        const img = new Image();
                        img.onload = () => {
                            gif.addFrame(img, {delay: delays[index]});
                            if (index === framesData.length - 1) {
                                gif.render();
                            }
                        };
                        img.src = dataUrl;
                    });
                    
                    gif.on('finished', function(blob) {
                        const url = URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.download = `nuar-animation-${Date.now()}.gif`;
                        link.href = url;
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                        URL.revokeObjectURL(url);
                        showNotification('GIF —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–∞—á–∞–Ω!', 'success');
                        resolve();
                    });
                    
                } catch (error) {
                    reject(error);
                }
            });
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞ —Å –∫–∞–¥—Ä–∞–º–∏
        async function createFramesZip(framesData) {
            try {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º JSZip –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
                if (typeof JSZip !== 'undefined') {
                    const zip = new JSZip();
                    const timestamp = Date.now();
                    
                    framesData.forEach((dataUrl, index) => {
                        // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º DataURL –≤ blob
                        const byteString = atob(dataUrl.split(',')[1]);
                        const mimeString = dataUrl.split(',')[0].split(':')[1].split(';')[0];
                        const ab = new ArrayBuffer(byteString.length);
                        const ia = new Uint8Array(ab);
                        for (let i = 0; i < byteString.length; i++) {
                            ia[i] = byteString.charCodeAt(i);
                        }
                        const blob = new Blob([ab], {type: mimeString});
                        
                        const frameNum = (index + 1).toString().padStart(3, '0');
                        zip.file(`frame-${frameNum}.png`, blob);
                    });
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
                    const instruction = `–°–æ–±–µ—Ä–∏—Ç–µ —ç—Ç–∏ –∫–∞–¥—Ä—ã –≤ GIF —Å –ø–æ–º–æ—â—å—é:\n- Photoshop\n- GIMP\n- Online GIF Maker\n- –∏–ª–∏ –ª—é–±–æ–≥–æ –≤–∏–¥–µ–æ—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞\n\n–í—Å–µ–≥–æ –∫–∞–¥—Ä–æ–≤: ${framesData.length}`;
                    zip.file('README.txt', instruction);
                    
                    const content = await zip.generateAsync({type: 'blob'});
                    const url = URL.createObjectURL(content);
                    const link = document.createElement('a');
                    link.download = `nuar-animation-frames-${timestamp}.zip`;
                    link.href = url;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);
                    
                    showNotification('–ö–∞–¥—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏ —Å–∫–∞—á–∞–Ω—ã –≤ ZIP! –°–æ–±–µ—Ä–∏—Ç–µ –∏—Ö –≤ GIF.', 'success');
                } else {
                    // –ï—Å–ª–∏ JSZip –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, —Å–∫–∞—á–∏–≤–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä –∫–∞–∫ –ø—Ä–∏–º–µ—Ä
                    const link = document.createElement('a');
                    link.download = 'nuar-animation-example.png';
                    link.href = framesData[0];
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    showNotification('–°–∫–∞—á–∞–Ω –ø—Ä–∏–º–µ—Ä –∫–∞–¥—Ä–∞. –î–ª—è GIF —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É JSZip.', 'info');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è ZIP:', error);
                throw error;
            }
        }

        // ========== –û–°–¢–ê–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò (–£–ü–†–û–©–ï–ù–ù–´–ï) ==========
        function getComplementaryColor(hex) {
            const colorMap = {
                '#00f3ff': '#ff00ff', '#ff00ff': '#00ff9d',
                '#00ff9d': '#ff5500', '#ff5500': '#9d00ff',
                '#9d00ff': '#00f3ff', '#ff009d': '#00ffea',
                '#00ffea': '#ff009d', '#ffcc00': '#33ccff',
                '#33ccff': '#ffcc00', '#00ff7f': '#ff3366',
                '#ff3366': '#00ff7f', '#cc33ff': '#33ffcc',
                '#33ffcc': '#cc33ff'
            };
            return colorMap[hex] || '#ffffff';
        }

        function updateFileSize() {
            if (!elements.fileSize) return;
            elements.fileSize.textContent = `~${150 + (state.bgAnimation !== 'none' ? 100 : 0)} KB`;
        }

        function showNotification(message, type = 'info') {
            const oldNotifications = document.querySelectorAll('.nuar-notification');
            oldNotifications.forEach(n => {
                n.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => n.remove(), 300);
            });
            
            const notification = document.createElement('div');
            notification.className = 'nuar-notification';
            
            const colors = {
                success: 'linear-gradient(135deg, #00ff9d, #00b36b)',
                error: 'linear-gradient(135deg, #ff3366, #cc0066)',
                info: 'linear-gradient(135deg, #00f3ff, #0099cc)',
                warning: 'linear-gradient(135deg, #ffcc00, #ff9900)'
            };
            
            notification.style.background = colors[type] || colors.info;
            
            const icons = {
                success: 'fa-check-circle', error: 'fa-exclamation-circle',
                info: 'fa-info-circle', warning: 'fa-exclamation-triangle'
            };
            
            notification.innerHTML = `<i class="fas ${icons[type] || 'fa-info-circle'}"></i><span>${message}</span>`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ========== –ê–ù–ò–ú–ê–¶–ò–Ø ==========
        function startAnimation() {
            if (!state.animationId) {
                state.animationId = requestAnimationFrame(animate);
            }
        }

        function animate(currentTime) {
            if (!state.lastRenderTime) state.lastRenderTime = currentTime;
            const deltaTime = currentTime - state.lastRenderTime;
            
            if (state.bgAnimation !== 'none' && elements.canvas) {
                updateParticles(deltaTime);
                renderParticles();
            }
            
            state.lastRenderTime = currentTime;
            state.animationId = requestAnimationFrame(animate);
        }

        function renderParticles() {
            if (!elements.canvas || !elements.canvas.getContext) return;
            const ctx = elements.canvas.getContext('2d');
            if (!ctx) return;
            ctx.clearRect(0, 0, elements.canvas.width, elements.canvas.height);
            drawBackground(ctx, elements.canvas.width, elements.canvas.height);
        }

        // ========== –ó–ê–ì–†–£–ó–ö–ê ==========
        window.addEventListener('load', () => {
            init();
            // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã
            loadGifLibrary();
        });

        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫
        function loadGifLibrary() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º gif.js –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GIF
            const gifScript = document.createElement('script');
            gifScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.js';
            gifScript.onload = () => console.log('GIF –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            gifScript.onerror = () => console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å GIF –±–∏–±–ª–∏–æ—Ç–µ–∫—É');
            document.head.appendChild(gifScript);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º JSZip –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–æ–≤
            const zipScript = document.createElement('script');
            zipScript.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
            zipScript.onload = () => console.log('JSZip –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            zipScript.onerror = () => console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å JSZip –±–∏–±–ª–∏–æ—Ç–µ–∫—É');
            document.head.appendChild(zipScript);
        }

        // –î–æ–±–∞–≤–ª—è–µ–º CSS –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            .pulse-effect { animation: pulse 2s infinite !important; }
            .glitch-effect { animation: glitch 0.8s infinite !important; }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; text-shadow: 0 0 25px currentColor; }
                50% { opacity: 0.8; text-shadow: 0 0 40px currentColor; }
            }
            
            @keyframes glitch {
                0%, 100% { transform: translate(0); }
                10% { transform: translate(-2px, -2px); }
                20% { transform: translate(2px, 2px); }
                30% { transform: translate(-2px, 2px); }
                40% { transform: translate(2px, -2px); }
                50% { transform: translate(-1px, 1px); }
                60% { transform: translate(1px, -1px); }
                70% { transform: translate(-1px, -1px); }
                80% { transform: translate(1px, 1px); }
                90% { transform: translate(-1px, 1px); }
            }
            
            @keyframes rainbow {
                0% { filter: hue-rotate(0deg); }
                100% { filter: hue-rotate(360deg); }
            }
        `;
        document.head.appendChild(styleSheet);
    </script>
</body>
</html>